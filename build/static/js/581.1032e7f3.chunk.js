"use strict";(self.webpackChunkquran_memorization_web=self.webpackChunkquran_memorization_web||[]).push([[581],{1581:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var i=s(5043),t=s(4973),n=s(6667),l=s(2673),c=s(579);function r(){const[e,a]=(0,i.useState)([]),[s,r]=(0,i.useState)(!0),[o,d]=(0,i.useState)(""),[m,u]=(0,i.useState)({id:"",name:"",description:"",date:"",time:"",location:"",imageUrl:""}),[h,x]=(0,i.useState)("add"),[j,g]=(0,i.useState)(""),[v,p]=(0,i.useState)(!1),[b,C]=(0,i.useState)({}),f=(0,i.useCallback)(async()=>{r(!0),d("");try{const e=await(0,n.GG)((0,n.rJ)(t.db,"activities")),s=[];e.forEach(e=>{s.push({id:e.id,...e.data()})}),a(s)}catch(e){console.error("Error fetching activities:",e),d("\u0641\u0634\u0644 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0623\u0646\u0634\u0637\u0629: "+e.message)}finally{r(!1)}},[]);(0,i.useEffect)(()=>{f()},[f]);const N=(0,i.useCallback)(()=>{u({id:"",name:"",description:"",date:"",time:"",location:"",imageUrl:""}),x("add"),d(""),g("")},[]),y=(0,i.useCallback)(e=>{const{name:a,value:s}=e.target;u(e=>({...e,[a]:s}))},[]),k=(0,i.useCallback)(()=>{const{name:e,description:a,date:s,time:i,location:t}=m;return e.trim()?a.trim()?s.trim()?i.trim()?!!t.trim()||(d("\u0645\u0648\u0642\u0639 \u0627\u0644\u0646\u0634\u0627\u0637 \u0645\u0637\u0644\u0648\u0628."),!1):(d("\u0648\u0642\u062a \u0627\u0644\u0646\u0634\u0627\u0637 \u0645\u0637\u0644\u0648\u0628."),!1):(d("\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0634\u0627\u0637 \u0645\u0637\u0644\u0648\u0628."),!1):(d("\u0648\u0635\u0641 \u0627\u0644\u0646\u0634\u0627\u0637 \u0645\u0637\u0644\u0648\u0628."),!1):(d("\u0627\u0633\u0645 \u0627\u0644\u0646\u0634\u0627\u0637 \u0645\u0637\u0644\u0648\u0628."),!1)},[m]),w=(0,i.useCallback)(async e=>{if(e.preventDefault(),d(""),g(""),k()){r(!0);try{const e={...m};if(delete e.id,"add"===h){const s=await(0,n.gS)((0,n.rJ)(t.db,"activities"),e);a(a=>[...a,{id:s.id,...e}]),g("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0634\u0627\u0637 \u0628\u0646\u062c\u0627\u062d!")}else{const s=(0,n.H9)(t.db,"activities",m.id);await(0,n.mZ)(s,e),a(a=>a.map(a=>a.id===m.id?{...a,...e}:a)),g("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0646\u0634\u0627\u0637 \u0628\u0646\u062c\u0627\u062d!")}N()}catch(s){console.error("Error saving activity:",s),d("\u0641\u0634\u0644 \u0641\u064a \u062d\u0641\u0638 \u0627\u0644\u0646\u0634\u0627\u0637: "+s.message)}finally{r(!1)}}},[h,m,k,N,f]),E=(0,i.useCallback)(e=>{u(e),x("edit"),g(""),d(""),window.scrollTo({top:0,behavior:"smooth"})},[]),S=(0,i.useCallback)(e=>{C({title:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0646\u0634\u0627\u0637\u061f",onConfirm:async()=>{p(!1),r(!0),d(""),g("");try{await(0,n.kd)((0,n.H9)(t.db,"activities",e)),a(a=>a.filter(a=>a.id!==e)),g("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0646\u0634\u0627\u0637 \u0628\u0646\u062c\u0627\u062d!")}catch(s){console.error("Error deleting activity:",s),d("\u0641\u0634\u0644 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0646\u0634\u0627\u0637: "+s.message)}finally{r(!1)}},onCancel:()=>p(!1),showCancelButton:!0}),p(!0)},[f]);return s&&0===e.length&&!o?(0,c.jsx)("p",{className:"loading-message",children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0623\u0646\u0634\u0637\u0629..."}):(0,c.jsxs)("div",{className:"activities-management-container page-container",children:[(0,c.jsx)("h2",{className:"activities-management-title",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0646\u0634\u0637\u0629"}),o&&(0,c.jsx)("p",{className:"error-message",children:o}),j&&(0,c.jsx)("p",{className:"success-message",children:j}),(0,c.jsxs)("div",{className:"activities-list-section card",children:[(0,c.jsx)("h3",{children:"\u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),s?(0,c.jsx)("p",{className:"loading-message",children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0623\u0646\u0634\u0637\u0629..."}):0===e.length?(0,c.jsx)("p",{className:"no-data-message",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0646\u0634\u0637\u0629 \u062d\u0627\u0644\u064a\u064b\u0627."}):(0,c.jsx)("ul",{className:"activities-list",children:e.map(e=>(0,c.jsxs)("li",{className:"activity-item",children:[(0,c.jsxs)("div",{className:"activity-info",children:[(0,c.jsx)("h4",{children:e.name}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\u0627\u0644\u0648\u0635\u0641:"})," ",e.description]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"})," ",e.date]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\u0627\u0644\u0648\u0642\u062a:"})," ",e.time]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\u0627\u0644\u0645\u0648\u0642\u0639:"})," ",e.location]}),e.imageUrl&&(0,c.jsx)("div",{className:"activity-image-wrapper",children:(0,c.jsx)("img",{src:e.imageUrl,alt:e.name,className:"activity-image",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/100x100/CCCCCC/333333?text=No+Image"}})})]}),(0,c.jsxs)("div",{className:"activity-actions",children:[(0,c.jsx)("button",{onClick:()=>E(e),className:"edit-button",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,c.jsx)("button",{onClick:()=>S(e.id),className:"delete-button",children:"\u062d\u0630\u0641"})]})]},e.id))})]}),(0,c.jsxs)("div",{className:"activity-form-section card",children:[(0,c.jsx)("h3",{children:"add"===h?"\u0625\u0636\u0627\u0641\u0629 \u0646\u0634\u0627\u0637 \u062c\u062f\u064a\u062f":"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0646\u0634\u0627\u0637"}),(0,c.jsxs)("form",{onSubmit:w,className:"activity-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"\u0627\u0633\u0645 \u0627\u0644\u0646\u0634\u0627\u0637:"}),(0,c.jsx)("input",{type:"text",name:"name",value:m.name,onChange:y,required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"\u0627\u0644\u0648\u0635\u0641:"}),(0,c.jsx)("textarea",{name:"description",value:m.description,onChange:y,required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"}),(0,c.jsx)("input",{type:"date",name:"date",value:m.date,onChange:y,required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"\u0627\u0644\u0648\u0642\u062a:"}),(0,c.jsx)("input",{type:"time",name:"time",value:m.time,onChange:y,required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"\u0627\u0644\u0645\u0648\u0642\u0639:"}),(0,c.jsx)("input",{type:"text",name:"location",value:m.location,onChange:y,required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0635\u0648\u0631\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a):"}),(0,c.jsx)("input",{type:"url",name:"imageUrl",value:m.imageUrl,onChange:y})]}),(0,c.jsx)("button",{type:"submit",className:"submit-button",disabled:s,children:s?"add"===h?"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0636\u0627\u0641\u0629...":"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u062f\u064a\u062b...":"add"===h?"\u0625\u0636\u0627\u0641\u0629":"\u062a\u062d\u062f\u064a\u062b"}),"edit"===h&&(0,c.jsx)("button",{type:"button",onClick:N,className:"cancel-button",disabled:s,children:"\u0625\u0644\u063a\u0627\u0621"})]})]}),(0,c.jsx)(l.A,{isOpen:v,title:b.title,message:b.message,onConfirm:b.onConfirm,onCancel:b.onCancel,showCancelButton:b.showCancelButton})]})}},2673:(e,a,s)=>{s.d(a,{A:()=>n});var i=s(5043),t=s(579);const n=e=>{let{isOpen:a,title:s,message:n,children:l,onConfirm:c,onCancel:r,showCancelButton:o=!0,closeOnOverlayClick:d=!1}=e;const m=(0,i.useRef)(null);if((0,i.useEffect)(()=>{if(a){var e;null===(e=m.current)||void 0===e||e.focus();const a=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}}},[a,r]),!a)return null;return(0,t.jsx)("div",{className:"modal-overlay",onClick:e=>{d&&m.current&&!m.current.contains(e.target)&&r()},children:(0,t.jsxs)("div",{className:"modal-content",ref:m,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-message",tabIndex:"-1",children:[(0,t.jsx)("h3",{id:"modal-title",className:"modal-title",children:s}),n&&(0,t.jsx)("p",{id:"modal-message",className:"modal-message",children:n}),l&&(0,t.jsx)("div",{className:"modal-body",children:l})," ",(0,t.jsxs)("div",{className:"modal-actions",children:[(0,t.jsx)("button",{onClick:c,className:"modal-confirm-button",children:"\u062a\u0623\u0643\u064a\u062f"}),o&&(0,t.jsx)("button",{onClick:r,className:"modal-cancel-button",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})}}}]);
//# sourceMappingURL=581.1032e7f3.chunk.js.map