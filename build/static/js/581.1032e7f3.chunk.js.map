{"version":3,"file":"static/js/581.1032e7f3.chunk.js","mappings":"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","sources":["components/ActivitiesManagement.js","components/CustomModal.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db } from \"../firebaseConfig\";\r\nimport {\r\n    collection,\r\n    getDocs,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    doc,\r\n} from \"firebase/firestore\";\r\nimport '../Styles/ActivitiesManagementStyles.css'; // استيراد ملف التنسيقات الخارجي\r\nimport CustomModal from './CustomModal'; // استيراد مكون المودال المخصص\r\n\r\nexport default function ActivitiesManagement() {\r\n    const [activities, setActivities] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n    const [formData, setFormData] = useState({\r\n        id: \"\",\r\n        name: \"\",\r\n        description: \"\",\r\n        date: \"\",\r\n        time: \"\",\r\n        location: \"\",\r\n        imageUrl: \"\",\r\n    });\r\n    const [formMode, setFormMode] = useState(\"add\"); // 'add' or 'edit'\r\n    const [message, setMessage] = useState(\"\");\r\n\r\n    // حالات المودال\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalConfig, setModalConfig] = useState({});\r\n\r\n    // دالة لجلب الأنشطة من Firestore\r\n    const fetchActivities = useCallback(async () => {\r\n        setLoading(true);\r\n        setError(\"\");\r\n        try {\r\n            const snapshot = await getDocs(collection(db, \"activities\"));\r\n            const activitiesList = [];\r\n            snapshot.forEach((doc) => {\r\n                activitiesList.push({ id: doc.id, ...doc.data() });\r\n            });\r\n            setActivities(activitiesList);\r\n        } catch (err) {\r\n            console.error(\"Error fetching activities:\", err);\r\n            setError(\"فشل في جلب الأنشطة: \" + err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []); // لا توجد تبعيات لأنها تجلب كل الأنشطة\r\n\r\n    useEffect(() => {\r\n        fetchActivities();\r\n    }, [fetchActivities]); // إضافة fetchActivities كاعتمادية\r\n\r\n    // دالة لمسح النموذج وإعادة تعيينه لوضع الإضافة\r\n    const resetForm = useCallback(() => {\r\n        setFormData({\r\n            id: \"\",\r\n            name: \"\",\r\n            description: \"\",\r\n            date: \"\",\r\n            time: \"\",\r\n            location: \"\",\r\n            imageUrl: \"\",\r\n        });\r\n        setFormMode(\"add\");\r\n        setError(\"\");\r\n        setMessage(\"\");\r\n    }, []);\r\n\r\n    // دالة لتحديث حالة النموذج عند تغيير المدخلات\r\n    const handleInputChange = useCallback((e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prevData) => ({\r\n            ...prevData,\r\n            [name]: value,\r\n        }));\r\n    }, []);\r\n\r\n    // دالة للتحقق من صحة البيانات المدخلة\r\n    const validateForm = useCallback(() => {\r\n        const { name, description, date, time, location } = formData;\r\n        if (!name.trim()) {\r\n            setError(\"اسم النشاط مطلوب.\");\r\n            return false;\r\n        }\r\n        if (!description.trim()) {\r\n            setError(\"وصف النشاط مطلوب.\");\r\n            return false;\r\n        }\r\n        if (!date.trim()) {\r\n            setError(\"تاريخ النشاط مطلوب.\");\r\n            return false;\r\n        }\r\n        if (!time.trim()) {\r\n            setError(\"وقت النشاط مطلوب.\");\r\n            return false;\r\n        }\r\n        if (!location.trim()) {\r\n            setError(\"موقع النشاط مطلوب.\");\r\n            return false;\r\n        }\r\n        // يمكنك إضافة المزيد من التحقق هنا، مثل تنسيق التاريخ والوقت\r\n        return true;\r\n    }, [formData]);\r\n\r\n    // دالة لإضافة أو تحديث نشاط\r\n    const handleSubmit = useCallback(async (e) => {\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        setMessage(\"\");\r\n        if (!validateForm()) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true); // بدء التحميل عند الإرسال\r\n        try {\r\n            const activityData = { ...formData };\r\n            delete activityData.id; // لا نحتاج لمعرف المستند داخل البيانات\r\n\r\n            if (formMode === \"add\") {\r\n                const docRef = await addDoc(collection(db, \"activities\"), activityData);\r\n                // --- Performance Improvement: Update local state instead of refetching ---\r\n                // تحديث الحالة المحلية مباشرة بدلاً من إعادة جلب كل البيانات\r\n                setActivities(prev => [...prev, { id: docRef.id, ...activityData }]);\r\n                setMessage(\"تم إضافة النشاط بنجاح!\");\r\n            } else {\r\n                const activityDocRef = doc(db, \"activities\", formData.id);\r\n                await updateDoc(activityDocRef, activityData);\r\n                // --- Performance Improvement: Update local state instead of refetching ---\r\n                // تحديث الحالة المحلية مباشرة بدلاً من إعادة جلب كل البيانات\r\n                setActivities(prev => prev.map(act => act.id === formData.id ? { ...act, ...activityData } : act));\r\n                setMessage(\"تم تحديث النشاط بنجاح!\");\r\n            }\r\n            resetForm(); // مسح النموذج بعد النجاح\r\n            // The line below is no longer needed, improving performance.\r\n            // لم نعد بحاجة إلى هذا السطر، مما يحسن الأداء.\r\n            // await fetchActivities(); \r\n        } catch (err) {\r\n            console.error(\"Error saving activity:\", err);\r\n            setError(\"فشل في حفظ النشاط: \" + err.message);\r\n        } finally {\r\n            setLoading(false); // إنهاء التحميل\r\n        }\r\n    }, [formMode, formData, validateForm, resetForm, fetchActivities]);\r\n\r\n    // دالة لتعبئة النموذج عند النقر على تعديل\r\n    const handleEditClick = useCallback((activity) => {\r\n        setFormData(activity);\r\n        setFormMode(\"edit\");\r\n        setMessage(\"\");\r\n        setError(\"\");\r\n        window.scrollTo({ top: 0, behavior: 'smooth' }); // التمرير لأعلى النموذج\r\n    }, []);\r\n\r\n    // دالة لحذف نشاط\r\n    const handleDeleteActivity = useCallback((id) => {\r\n        setModalConfig({\r\n            title: \"تأكيد الحذف\",\r\n            message: \"هل أنت متأكد أنك تريد حذف هذا النشاط؟\",\r\n            onConfirm: async () => {\r\n                setShowModal(false);\r\n                setLoading(true); // بدء التحميل عند الحذف\r\n                setError(\"\");\r\n                setMessage(\"\");\r\n                try {\r\n                    await deleteDoc(doc(db, \"activities\", id));\r\n                    // --- Performance Improvement: Update local state instead of refetching ---\r\n                    setActivities(prev => prev.filter(act => act.id !== id));\r\n                    setMessage(\"تم حذف النشاط بنجاح!\");\r\n                    // The line below is no longer needed, improving performance.\r\n                    // await fetchActivities();\r\n                } catch (err) {\r\n                    console.error(\"Error deleting activity:\", err);\r\n                    setError(\"فشل في حذف النشاط: \" + err.message);\r\n                } finally {\r\n                    setLoading(false); // إنهاء التحميل\r\n                }\r\n            },\r\n            onCancel: () => setShowModal(false),\r\n            showCancelButton: true,\r\n        });\r\n        setShowModal(true);\r\n    }, [fetchActivities]);\r\n\r\n    if (loading && activities.length === 0 && !error) {\r\n        return <p className=\"loading-message\">جاري تحميل الأنشطة...</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"activities-management-container page-container\">\r\n            <h2 className=\"activities-management-title\">إدارة الأنشطة</h2>\r\n\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n            {message && <p className=\"success-message\">{message}</p>}\r\n\r\n            <div className=\"activities-list-section card\">\r\n                <h3>الأنشطة الحالية</h3>\r\n                {loading ? (\r\n                    <p className=\"loading-message\">جاري تحميل الأنشطة...</p>\r\n                ) : activities.length === 0 ? (\r\n                    <p className=\"no-data-message\">لا توجد أنشطة حاليًا.</p>\r\n                ) : (\r\n                    <ul className=\"activities-list\">\r\n                        {activities.map((activity) => (\r\n                            <li key={activity.id} className=\"activity-item\">\r\n                                <div className=\"activity-info\">\r\n                                    <h4>{activity.name}</h4>\r\n                                    <p><strong>الوصف:</strong> {activity.description}</p>\r\n                                    <p><strong>التاريخ:</strong> {activity.date}</p>\r\n                                    <p><strong>الوقت:</strong> {activity.time}</p>\r\n                                    <p><strong>الموقع:</strong> {activity.location}</p>\r\n                                    {activity.imageUrl && (\r\n                                        <div className=\"activity-image-wrapper\">\r\n                                            <img src={activity.imageUrl} alt={activity.name} className=\"activity-image\" onError={(e) => { e.target.onerror = null; e.target.src = \"https://placehold.co/100x100/CCCCCC/333333?text=No+Image\"; }} />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"activity-actions\">\r\n                                    <button onClick={() => handleEditClick(activity)} className=\"edit-button\">\r\n                                        تعديل\r\n                                    </button>\r\n                                    <button onClick={() => handleDeleteActivity(activity.id)} className=\"delete-button\">\r\n                                        حذف\r\n                                    </button>\r\n                                </div>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n            </div>\r\n\r\n            {/* نموذج إضافة/تعديل النشاط */}\r\n            <div className=\"activity-form-section card\">\r\n                <h3>{formMode === \"add\" ? \"إضافة نشاط جديد\" : \"تعديل النشاط\"}</h3>\r\n                <form onSubmit={handleSubmit} className=\"activity-form\">\r\n                    <div className=\"form-group\">\r\n                        <label>اسم النشاط:</label>\r\n                        <input type=\"text\" name=\"name\" value={formData.name} onChange={handleInputChange} required />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>الوصف:</label>\r\n                        <textarea name=\"description\" value={formData.description} onChange={handleInputChange} required />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>التاريخ:</label>\r\n                        <input type=\"date\" name=\"date\" value={formData.date} onChange={handleInputChange} required />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>الوقت:</label>\r\n                        <input type=\"time\" name=\"time\" value={formData.time} onChange={handleInputChange} required />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>الموقع:</label>\r\n                        <input type=\"text\" name=\"location\" value={formData.location} onChange={handleInputChange} required />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>رابط الصورة (اختياري):</label>\r\n                        <input type=\"url\" name=\"imageUrl\" value={formData.imageUrl} onChange={handleInputChange} />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"submit-button\" disabled={loading}>\r\n                        {loading ? (formMode === \"add\" ? \"جاري الإضافة...\" : \"جاري التحديث...\") : (formMode === \"add\" ? \"إضافة\" : \"تحديث\")}\r\n                    </button>\r\n                    {formMode === \"edit\" && (\r\n                        <button type=\"button\" onClick={resetForm} className=\"cancel-button\" disabled={loading}>\r\n                            إلغاء\r\n                        </button>\r\n                    )}\r\n                </form>\r\n            </div>\r\n\r\n            {/* مودال التأكيد */}\r\n            <CustomModal\r\n                isOpen={showModal}\r\n                title={modalConfig.title}\r\n                message={modalConfig.message}\r\n                onConfirm={modalConfig.onConfirm}\r\n                onCancel={modalConfig.onCancel}\r\n                showCancelButton={modalConfig.showCancelButton}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","// src/components/CustomModal.js\r\nimport React, { useEffect, useRef } from 'react';\r\nimport '../Styles/CustomModalStyles.css';\r\n\r\nconst CustomModal = ({ isOpen, title, message, children, onConfirm, onCancel, showCancelButton = true, closeOnOverlayClick = false }) => {\r\n    const modalRef = useRef(null);\r\n\r\n    // Effect to manage focus and keyboard accessibility\r\n    // تأثير لإدارة التركيز وإمكانية الوصول عبر لوحة المفاتيح\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            // Focus the modal content when it opens\r\n            // تركيز محتوى المودال عند فتحه\r\n            modalRef.current?.focus();\r\n\r\n            // Add event listener for Escape key to close modal\r\n            // إضافة مستمع حدث لمفتاح Escape لإغلاق المودال\r\n            const handleEscape = (event) => {\r\n                if (event.key === 'Escape') {\r\n                    onCancel(); // Use onCancel to close the modal\r\n                }\r\n            };\r\n            document.addEventListener('keydown', handleEscape);\r\n\r\n            // Cleanup function to remove event listener\r\n            // دالة تنظيف لإزالة مستمع الحدث\r\n            return () => {\r\n                document.removeEventListener('keydown', handleEscape);\r\n            };\r\n        }\r\n    }, [isOpen, onCancel]);\r\n\r\n    // If modal is not open, return null to render nothing\r\n    // إذا لم يكن المودال مفتوحًا، أعد قيمة null لعدم عرض أي شيء\r\n    if (!isOpen) return null;\r\n\r\n    // Handle overlay click to close modal if allowed\r\n    // معالجة النقر على الخلفية لإغلاق المودال إذا كان مسموحًا\r\n    const handleOverlayClick = (e) => {\r\n        if (closeOnOverlayClick && modalRef.current && !modalRef.current.contains(e.target)) {\r\n            onCancel();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal-overlay\" onClick={handleOverlayClick}>\r\n            <div\r\n                className=\"modal-content\"\r\n                ref={modalRef}\r\n                role=\"dialog\" // ARIA role for dialog\r\n                aria-modal=\"true\" // Indicates that the dialog is modal\r\n                aria-labelledby=\"modal-title\" // Links to the title for accessibility\r\n                aria-describedby=\"modal-message\" // Links to the message for accessibility\r\n                tabIndex=\"-1\" // Makes the modal content focusable\r\n            >\r\n                <h3 id=\"modal-title\" className=\"modal-title\">{title}</h3>\r\n                {message && <p id=\"modal-message\" className=\"modal-message\">{message}</p>}\r\n                {children && <div className=\"modal-body\">{children}</div>} {/* عرض المحتوى المخصص */}\r\n                <div className=\"modal-actions\">\r\n                    <button onClick={onConfirm} className=\"modal-confirm-button\">\r\n                        تأكيد\r\n                    </button>\r\n                    {showCancelButton && (\r\n                        <button onClick={onCancel} className=\"modal-cancel-button\">\r\n                            إلغاء\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomModal;\r\n"],"names":["ActivitiesManagement","activities","setActivities","useState","loading","setLoading","error","setError","formData","setFormData","id","name","description","date","time","location","imageUrl","formMode","setFormMode","message","setMessage","showModal","setShowModal","modalConfig","setModalConfig","fetchActivities","useCallback","async","snapshot","getDocs","collection","db","activitiesList","forEach","doc","push","data","err","console","useEffect","resetForm","handleInputChange","e","value","target","prevData","validateForm","trim","handleSubmit","preventDefault","activityData","docRef","addDoc","prev","activityDocRef","updateDoc","map","act","handleEditClick","activity","window","scrollTo","top","behavior","handleDeleteActivity","title","onConfirm","deleteDoc","filter","onCancel","showCancelButton","length","_jsx","className","children","_jsxs","src","alt","onError","onerror","onClick","onSubmit","type","onChange","required","disabled","CustomModal","isOpen","_ref","closeOnOverlayClick","modalRef","useRef","_modalRef$current","current","focus","handleEscape","event","key","document","addEventListener","removeEventListener","contains","ref","role","tabIndex"],"sourceRoot":""}